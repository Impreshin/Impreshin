<!doctype html>
<!--[if lt IE 7]>
<html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>
<html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>
<html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>Test regex</title>
	<meta name="description" content="">
	<meta name="author" content="">


	<meta name="viewport" content="width=device-width,initial-scale=1">






	
	


</head>
<body>

<div id="test"> u  A person only becomes what she or he visualises about himself or herself),” she added. “So, I visualised about my successful matric results while working hard, and went on to make it.”
</div>

<script src="/ui/_js/libs/jquery.js"></script>

<style type="text/css">
	.word-highlight {
		color:red;
	}
	
</style>
<script type="text/javascript">
	String.prototype.replaceArray = function(find, replace) {
		var replaceString = this;
		var regex;
		console.log(find); 
		console.log(replace); 
		for (var i = 0; i < find.length; i++) {
			regex = new RegExp(find[i], "g");
			//console.log(regex); 
			replaceString = replaceString.replace(regex, replace[i]);
		}
		return replaceString;
	};
	var letterChars = "a-zA-Z ";
</script>

<script type="text/javascript">

	var incorrectWords = ['u','matric']
	incorrectWords = $.map(incorrectWords, function(word) {
		return escape(word);
	});
	
	
	
	findAndReplaceDOMText($("#test"), incorrectWords);
	
	
	//this.replaceText(new RegExp(regExp, 'g'), element[0], this.highlightWordsHandler(incorrectWords), 2);
	

	function highlightWordsHandler(incorrectWords) {

		 
		var r = $.map(incorrectWords,function(v){
			
			var span = $('<span />', {
				'class': 'word-highlight'
			});

			span.text(v);
			span = $('<div>').append(span).html();
			
			
			return span
		})

		//$('#element-of-interest').prop('outerHTML');
		
		return r;
	};
	function escape(text) {
		return text.replace(/[\-\[\]{}()*+?.,\^$|#\s]/g, "\\$&");
	};
	

	function findAndReplaceDOMText(element,words) {

		console.info(element.html()); 
		console.info(words);



		var body = element.html();

		var patterns = $.map(words,function(v){
					var regExp = '';
					

			regExp += '([^' + letterChars + ']?)';
			regExp += '(' + v + ')';
			regExp += '(?=[^' + letterChars + ']?)';
			
			
					
					return regExp
		});


		console.log(patterns); 

		var rep = highlightWordsHandler(words);
		console.log(rep); 
		
		body = body.replaceArray(patterns, rep);

		element.html(body);
		
		
		
	};
	
	
</script>

</body>
</html>